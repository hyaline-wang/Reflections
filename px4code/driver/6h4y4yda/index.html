<!doctype html><html lang="zh-CN"><head><meta charset="utf-8" /><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="generator" content="VuePress 2.0.0-rc.18" /><meta name="theme" content="VuePress Theme Plume " /><script id="check-mac-os">document.documentElement.classList.toggle('mac', /Mac|iPhone|iPod|iPad/i.test(navigator.platform))</script><script id="check-dark-mode">;(function () {const um= localStorage.getItem('vuepress-theme-appearance') || 'auto';const sm = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;const isDark = um === 'dark' || (um !== 'light' && sm);document.documentElement.dataset.theme = isDark ? 'dark' : 'light';})();</script><meta property="og:url" content="https://hyaline.qyswarm.top/px4code/driver/6h4y4yda/"><meta property="og:site_name" content="Reflections of Hyaline"><meta property="og:title" content="esc_protocol"><meta property="og:description" content="标准pwm 对于无刷电调，pwm一般使用高电平脉宽代表油门百分比，一般来说，脉宽的范围是12ms对应油门0100%。 由于满油门需要在一个周期保证2ms高电平，因此最大控制频率为500hz。当然一个周期里不能只有高电平，每个周期后面跟一个在跟一个时间非常短的低电平，pwm频率适当降低（比如490hz）。 常见的pwm控制频率为 50~490hz。 对于..."><meta property="og:type" content="article"><meta property="og:image" content="https://emnavi-doc-img.oss-cn-beijing.aliyuncs.com/hao_doc/pwm.png"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2024-10-20T14:14:17.000Z"><meta property="article:modified_time" content="2024-10-20T14:14:17.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"esc_protocol","image":["https://emnavi-doc-img.oss-cn-beijing.aliyuncs.com/hao_doc/pwm.png","https://emnavi-doc-img.oss-cn-beijing.aliyuncs.com/hao_doc/Pasted%20image%2020240402133548.png","https://emnavi-doc-img.oss-cn-beijing.aliyuncs.com/hao_doc/Pasted%20image%2020240402134506.png","https://emnavi-doc-img.oss-cn-beijing.aliyuncs.com/hao_doc/Pasted%20image%2020240402134349.png","https://emnavi-doc-img.oss-cn-beijing.aliyuncs.com/hao_doc/Pasted%20image%2020240402134721.png","https://emnavi-doc-img.oss-cn-beijing.aliyuncs.com/hao_doc/pwm.png"],"dateModified":"2024-10-20T14:14:17.000Z","author":[]}</script><title>esc_protocol | Reflections of Hyaline</title><meta name="description" content="标准pwm 对于无刷电调，pwm一般使用高电平脉宽代表油门百分比，一般来说，脉宽的范围是12ms对应油门0100%。 由于满油门需要在一个周期保证2ms高电平，因此最大控制频率为500hz。当然一个周期里不能只有高电平，每个周期后面跟一个在跟一个时间非常短的低电平，pwm频率适当降低（比如490hz）。 常见的pwm控制频率为 50~490hz。 对于..."><link rel="preload" href="/assets/style-DgmyGy5d.css" as="style"><link rel="stylesheet" href="/assets/style-DgmyGy5d.css"><link rel="modulepreload" href="/assets/app-vo1rYq2c.js"><link rel="modulepreload" href="/assets/index.html-B0yMU8Ae.js"><link rel="prefetch" href="/assets/index.html-YFTfTYVL.js" as="script"><link rel="prefetch" href="/assets/index.html-Pup59qdI.js" as="script"><link rel="prefetch" href="/assets/index.html-DGWbbfUq.js" as="script"><link rel="prefetch" href="/assets/index.html-s9gnD4o4.js" as="script"><link rel="prefetch" href="/assets/index.html-YE6mHZl5.js" as="script"><link rel="prefetch" href="/assets/index.html-BocoaVVL.js" as="script"><link rel="prefetch" href="/assets/index.html-DRhSKV_l.js" as="script"><link rel="prefetch" href="/assets/index.html-DOhL2bqj.js" as="script"><link rel="prefetch" href="/assets/index.html-CKzeLscq.js" as="script"><link rel="prefetch" href="/assets/index.html-BrwCI7Oq.js" as="script"><link rel="prefetch" href="/assets/index.html-C6uKvetb.js" as="script"><link rel="prefetch" href="/assets/index.html-BwHnbshc.js" as="script"><link rel="prefetch" href="/assets/index.html-BCG9Qu-k.js" as="script"><link rel="prefetch" href="/assets/index.html-Cy_cR5sg.js" as="script"><link rel="prefetch" href="/assets/index.html-CxpbJHUM.js" as="script"><link rel="prefetch" href="/assets/index.html-CzcaZNFa.js" as="script"><link rel="prefetch" href="/assets/index.html-Cw_K8emj.js" as="script"><link rel="prefetch" href="/assets/index.html-B3JRsW1x.js" as="script"><link rel="prefetch" href="/assets/index.html-DTSOnIby.js" as="script"><link rel="prefetch" href="/assets/index.html-CpcPx4Jn.js" as="script"><link rel="prefetch" href="/assets/index.html-CUgATDQa.js" as="script"><link rel="prefetch" href="/assets/index.html-CPQ3yyEE.js" as="script"><link rel="prefetch" href="/assets/index.html-Bk501f1F.js" as="script"><link rel="prefetch" href="/assets/index.html-CPvt3ROF.js" as="script"><link rel="prefetch" href="/assets/index.html--_br75Le.js" as="script"><link rel="prefetch" href="/assets/index.html-CBgYB9Xz.js" as="script"><link rel="prefetch" href="/assets/index.html-mTBx31Za.js" as="script"><link rel="prefetch" href="/assets/index.html-Rucsrau8.js" as="script"><link rel="prefetch" href="/assets/index.html-qEf85Hdf.js" as="script"><link rel="prefetch" href="/assets/index.html-D7xS_OCD.js" as="script"><link rel="prefetch" href="/assets/index.html-CTJxgAHy.js" as="script"><link rel="prefetch" href="/assets/index.html-C_xTeC95.js" as="script"><link rel="prefetch" href="/assets/index.html-9PLu3VZd.js" as="script"><link rel="prefetch" href="/assets/index.html-DmbF9Rbu.js" as="script"><link rel="prefetch" href="/assets/index.html-6fSUjEsq.js" as="script"><link rel="prefetch" href="/assets/index.html-2VuPYIn6.js" as="script"><link rel="prefetch" href="/assets/index.html-DBUG--Fd.js" as="script"><link rel="prefetch" href="/assets/index.html-C7LAil-L.js" as="script"><link rel="prefetch" href="/assets/index.html-Sz1LQbuj.js" as="script"><link rel="prefetch" href="/assets/index.html-Ben9S_NZ.js" as="script"><link rel="prefetch" href="/assets/index.html-BRROz67N.js" as="script"><link rel="prefetch" href="/assets/index.html-WoYopY8I.js" as="script"><link rel="prefetch" href="/assets/index.html-CN3vYjF0.js" as="script"><link rel="prefetch" href="/assets/index.html-DwgLXnA4.js" as="script"><link rel="prefetch" href="/assets/index.html-C9sr_P3Z.js" as="script"><link rel="prefetch" href="/assets/index.html-CnpdF1oy.js" as="script"><link rel="prefetch" href="/assets/index.html-B2vM8j54.js" as="script"><link rel="prefetch" href="/assets/index.html-C8o9hyy_.js" as="script"><link rel="prefetch" href="/assets/index.html-Di0sGJs-.js" as="script"><link rel="prefetch" href="/assets/index.html-BaCyXFb6.js" as="script"><link rel="prefetch" href="/assets/index.html-C3extoi-.js" as="script"><link rel="prefetch" href="/assets/index.html-DmEM0sdE.js" as="script"><link rel="prefetch" href="/assets/index.html-CibPn-gp.js" as="script"><link rel="prefetch" href="/assets/index.html-C7ZPw5EP.js" as="script"><link rel="prefetch" href="/assets/index.html-BTCjnC_o.js" as="script"><link rel="prefetch" href="/assets/index.html-CICZbSEx.js" as="script"><link rel="prefetch" href="/assets/index.html-DjW4iVwC.js" as="script"><link rel="prefetch" href="/assets/index.html-9DPUPNFE.js" as="script"><link rel="prefetch" href="/assets/index.html-CCAfvkvf.js" as="script"><link rel="prefetch" href="/assets/index.html-D539JpCM.js" as="script"><link rel="prefetch" href="/assets/index.html-DB9_wBgV.js" as="script"><link rel="prefetch" href="/assets/index.html-827a9L7H.js" as="script"><link rel="prefetch" href="/assets/index.html-ThrKtBFe.js" as="script"><link rel="prefetch" href="/assets/index.html-BsbENsPE.js" as="script"><link rel="prefetch" href="/assets/index.html-CSIRbYJb.js" as="script"><link rel="prefetch" href="/assets/index.html-ox3U4555.js" as="script"><link rel="prefetch" href="/assets/index.html-ChswU8gF.js" as="script"><link rel="prefetch" href="/assets/index.html-DUhRNEzm.js" as="script"><link rel="prefetch" href="/assets/index.html-b0XZHukd.js" as="script"><link rel="prefetch" href="/assets/index.html-m47Gbtdh.js" as="script"><link rel="prefetch" href="/assets/index.html-CDofdTCF.js" as="script"><link rel="prefetch" href="/assets/index.html-Do0QXJiF.js" as="script"><link rel="prefetch" href="/assets/index.html-CYCtWkYp.js" as="script"><link rel="prefetch" href="/assets/index.html-D58uA96e.js" as="script"><link rel="prefetch" href="/assets/index.html-QbEEvpWM.js" as="script"><link rel="prefetch" href="/assets/index.html-CEKv6FWM.js" as="script"><link rel="prefetch" href="/assets/index.html-J4IrfsVa.js" as="script"><link rel="prefetch" href="/assets/index.html-B7YYCuMI.js" as="script"><link rel="prefetch" href="/assets/index.html-CY5EV3Pf.js" as="script"><link rel="prefetch" href="/assets/index.html-BvKMiF69.js" as="script"><link rel="prefetch" href="/assets/index.html-CWdWbB0k.js" as="script"><link rel="prefetch" href="/assets/index.html-C3qlmsnm.js" as="script"><link rel="prefetch" href="/assets/index.html-CpfwG6AS.js" as="script"><link rel="prefetch" href="/assets/index.html-DWF_ZgMN.js" as="script"><link rel="prefetch" href="/assets/index.html-Dj59aYZx.js" as="script"><link rel="prefetch" href="/assets/404.html-Cm2XlB5y.js" as="script"><link rel="prefetch" href="/assets/index.html-DVBfIE31.js" as="script"><link rel="prefetch" href="/assets/index.html-BahB3UBo.js" as="script"><link rel="prefetch" href="/assets/index.html-CO3YfsUg.js" as="script"><link rel="prefetch" href="/assets/index.html-lj2sZhwL.js" as="script"><link rel="prefetch" href="/assets/index.html-B0KCv7hE.js" as="script"><link rel="prefetch" href="/assets/index.html-DX6ZFXp-.js" as="script"><link rel="prefetch" href="/assets/index.html-DNOWRWYu.js" as="script"><link rel="prefetch" href="/assets/index.html-O7Mm7Zu-.js" as="script"><link rel="prefetch" href="/assets/photoswipe.esm-GXRgw7eJ.js" as="script"><link rel="prefetch" href="/assets/searchBox-default-crBdcbpm.js" as="script"><link rel="prefetch" href="/assets/searchBox-en-DMYsc42c.js" as="script"><link rel="prefetch" href="/assets/SearchBox-CTCSqa4w.js" as="script"><link rel="prefetch" href="/assets/setupDevtools-7MC2TMWH-BQ4YBpmm.js" as="script"></head><body><div id="app"><!--[--><div class="theme-plume vp-layout" vp-container data-v-72347141><!--[--><!--[--><!--]--><!--[--><span tabindex="-1" data-v-b61813ab></span><a href="#VPContent" class="vp-skip-link visually-hidden" data-v-b61813ab> Skip to content </a><!--]--><!----><header class="vp-nav" data-v-72347141 data-v-41315436><div class="vp-navbar" vp-navbar data-v-41315436 data-v-2b21c2ff><div class="wrapper" data-v-2b21c2ff><div class="container" data-v-2b21c2ff><div class="title" data-v-2b21c2ff><div class="vp-navbar-title has-sidebar" data-v-2b21c2ff data-v-3eca8829><a class="vp-link no-icon link title" href="/" data-v-3eca8829 data-v-85010ec6><!--[--><!--[--><!--]--><!--[--><!--[--><!--[--><img class="vp-image dark logo" src="/notebook.svg" alt data-v-94c9c0fc><!--]--><!--[--><img class="vp-image light logo" src="/notebook.svg" alt data-v-94c9c0fc><!--]--><!--]--><!--]--><span data-v-3eca8829>Reflections of Hyaline</span><!--[--><!--]--><!--]--><!----></a></div></div><div class="content" data-v-2b21c2ff><div class="content-body" data-v-2b21c2ff><!--[--><!--]--><div class="vp-navbar-search search" data-v-2b21c2ff><div class="search-wrapper" data-v-c5119475><!----><div id="local-search" data-v-c5119475><button type="button" class="mini-search mini-search-button" aria-label="搜索文档" data-v-c5119475><span class="mini-search-button-container"><svg class="mini-search-search-icon" width="20" height="20" viewBox="0 0 20 20" aria-label="search icon"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="mini-search-button-placeholder">搜索文档</span></span><span class="mini-search-button-keys"><kbd class="mini-search-button-key"></kbd><kbd class="mini-search-button-key">K</kbd></span></button></div></div></div><nav aria-labelledby="main-nav-aria-label" class="vp-navbar-menu menu" data-v-2b21c2ff data-v-276dd622><span id="main-nav-aria-label" class="visually-hidden" data-v-276dd622>Main Navigation</span><!--[--><!--[--><a class="vp-link no-icon link navbar-menu-link" href="/" tabindex="0" data-v-276dd622 data-v-f33fd5ec data-v-85010ec6><!--[--><!----><span data-v-f33fd5ec>首页</span><!--]--><!----></a><!--]--><!--[--><a class="vp-link no-icon link navbar-menu-link" href="/blog/" tabindex="0" data-v-276dd622 data-v-f33fd5ec data-v-85010ec6><!--[--><!----><span data-v-f33fd5ec>博客</span><!--]--><!----></a><!--]--><!--[--><div class="vp-flyout vp-navbar-menu-group" data-v-276dd622 data-v-bbc6bb98><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-bbc6bb98><span class="text" data-v-bbc6bb98><!----><!----><span data-v-bbc6bb98>笔记</span><span class="vpi-chevron-down text-icon" data-v-bbc6bb98></span></span></button><div class="menu" data-v-bbc6bb98><div class="vp-menu" data-v-bbc6bb98 data-v-d593d810><div class="items" data-v-d593d810><!--[--><!--[--><div class="vp-menu-link" data-v-d593d810 data-v-09ee1cd6><a class="vp-link no-icon link" href="/px4code/" data-v-09ee1cd6 data-v-85010ec6><!--[--><!----> px4源码解析<!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-d593d810 data-v-09ee1cd6><a class="vp-link no-icon link" href="/linux_base/" data-v-09ee1cd6 data-v-85010ec6><!--[--><!----> linux基础<!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-d593d810 data-v-09ee1cd6><a class="vp-link no-icon link" href="/robot_base/" data-v-09ee1cd6 data-v-85010ec6><!--[--><!----> 机器人基础<!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-d593d810 data-v-09ee1cd6><a class="vp-link no-icon link" href="/normal_hw/rtk/eiwjd104/" data-v-09ee1cd6 data-v-85010ec6><!--[--><!----> 硬件文档<!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-d593d810 data-v-09ee1cd6><a class="vp-link no-icon link" href="/easy_server_manage/user_manage/tgm1160i/" data-v-09ee1cd6 data-v-85010ec6><!--[--><!----> 简易服务器管理<!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-d593d810 data-v-09ee1cd6><a class="vp-link no-icon link" href="/production_doc/X152b/27023b50/" data-v-09ee1cd6 data-v-85010ec6><!--[--><!----> 生产文档<!--]--><!----></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--]--></nav><div class="vp-flyout vp-navbar-translations translations" data-v-2b21c2ff data-v-9d522f1a data-v-bbc6bb98><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="选择语言" data-v-bbc6bb98><span class="text" data-v-bbc6bb98><!----><span class="vpi-languages option-icon" data-v-bbc6bb98></span><!----><span class="vpi-chevron-down text-icon" data-v-bbc6bb98></span></span></button><div class="menu" data-v-bbc6bb98><div class="vp-menu" data-v-bbc6bb98 data-v-d593d810><!----><!--[--><!--[--><div class="items" data-v-9d522f1a><p class="title" data-v-9d522f1a>简体中文</p><!--[--><div class="vp-menu-link" data-v-9d522f1a data-v-09ee1cd6><a class="vp-link no-icon link" href="/en/" data-v-09ee1cd6 data-v-85010ec6><!--[--><!----> English<!--]--><!----></a></div><!--]--></div><!--]--><!--]--></div></div></div><div class="vp-navbar-appearance appearance" data-v-2b21c2ff data-v-5c9adf83><button class="vp-switch vp-switch-appearance" type="button" role="switch" title aria-checked="false" data-v-5c9adf83 data-v-602d4382 data-v-e1ec7bca><span class="check" data-v-e1ec7bca><span class="icon" data-v-e1ec7bca><!--[--><span class="vpi-sun sun" data-v-602d4382></span><span class="vpi-moon moon" data-v-602d4382></span><!--]--></span></span></button></div><!----><div class="vp-flyout vp-navbar-extra extra" data-v-2b21c2ff data-v-b15af674 data-v-bbc6bb98><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-bbc6bb98><span class="vpi-more-horizontal icon" data-v-bbc6bb98></span></button><div class="menu" data-v-bbc6bb98><div class="vp-menu" data-v-bbc6bb98 data-v-d593d810><!----><!--[--><!--[--><div class="group translations" data-v-b15af674><p class="trans-title" data-v-b15af674>简体中文</p><!--[--><div class="vp-menu-link" data-v-b15af674 data-v-09ee1cd6><a class="vp-link no-icon link" href="/en/" data-v-09ee1cd6 data-v-85010ec6><!--[--><!----> English<!--]--><!----></a></div><!--]--></div><div class="group" data-v-b15af674><div class="item appearance" data-v-b15af674><p class="label" data-v-b15af674>外观</p><div class="appearance-action" data-v-b15af674><button class="vp-switch vp-switch-appearance" type="button" role="switch" title aria-checked="false" data-v-b15af674 data-v-602d4382 data-v-e1ec7bca><span class="check" data-v-e1ec7bca><span class="icon" data-v-e1ec7bca><!--[--><span class="vpi-sun sun" data-v-602d4382></span><span class="vpi-moon moon" data-v-602d4382></span><!--]--></span></span></button></div></div></div><!----><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="vp-navbar-hamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="nav-screen" data-v-2b21c2ff data-v-82a94bf0><span class="container" data-v-82a94bf0><span class="top" data-v-82a94bf0></span><span class="middle" data-v-82a94bf0></span><span class="bottom" data-v-82a94bf0></span></span></button></div></div></div></div><div class="divider" data-v-2b21c2ff><div class="divider-line" data-v-2b21c2ff></div></div></div><!----></header><div class="vp-local-nav reached-top is-blog" data-v-72347141 data-v-35bda670><button class="menu" aria-expanded="false" aria-controls="SidebarNav" data-v-35bda670><span class="vpi-align-left menu-icon" data-v-35bda670></span><span class="menu-text" data-v-35bda670>Menu</span></button><div class="vp-local-nav-outline-dropdown" style="--vp-vh:0px;" data-v-35bda670 data-v-ff9d5504><button data-v-ff9d5504>返回顶部</button><!----></div></div><aside class="vp-sidebar" vp-sidebar data-v-72347141 data-v-cdebdfd8><div class="curtain" data-v-cdebdfd8></div><nav id="SidebarNav" class="nav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-cdebdfd8><span id="sidebar-aria-label" class="visually-hidden" data-v-cdebdfd8> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-27da67de><section class="vp-sidebar-item sidebar-item level-0" data-v-27da67de data-v-4d095593><!----><div class="items" data-v-4d095593><!--[--><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-4d095593 data-v-4d095593><div class="item" data-v-4d095593><div class="indicator" data-v-4d095593></div><!----><a class="vp-link no-icon link link" href="/px4code/" data-v-4d095593 data-v-85010ec6><!--[--><p class="text" data-v-4d095593>飞控源码</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-4d095593 data-v-4d095593><div class="item" data-v-4d095593><div class="indicator" data-v-4d095593></div><!----><a class="vp-link no-icon link link" href="/s26d5kdj/" data-v-4d095593 data-v-85010ec6><!--[--><p class="text" data-v-4d095593>参数调试</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-27da67de><section class="vp-sidebar-item sidebar-item level-0 collapsible" data-v-27da67de data-v-4d095593><div class="item" role="button" tabindex="0" data-v-4d095593><div class="indicator" data-v-4d095593></div><!----><h2 class="text" data-v-4d095593>代码构建</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-4d095593><span class="vpi-chevron-right caret-icon" data-v-4d095593></span></div></div><div class="items" data-v-4d095593><!--[--><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-4d095593 data-v-4d095593><div class="item" data-v-4d095593><div class="indicator" data-v-4d095593></div><!----><a class="vp-link no-icon link link" href="/px4code/wno3ydw8/" data-v-4d095593 data-v-85010ec6><!--[--><p class="text" data-v-4d095593>构建px4 docker环境</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-27da67de><section class="vp-sidebar-item sidebar-item level-0 collapsible" data-v-27da67de data-v-4d095593><div class="item" role="button" tabindex="0" data-v-4d095593><div class="indicator" data-v-4d095593></div><!----><h2 class="text" data-v-4d095593>固件修改</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-4d095593><span class="vpi-chevron-right caret-icon" data-v-4d095593></span></div></div><div class="items" data-v-4d095593><!--[--><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-4d095593 data-v-4d095593><div class="item" data-v-4d095593><div class="indicator" data-v-4d095593></div><!----><a class="vp-link no-icon link link" href="/px4code/firmware_change/oiyurg2e/" data-v-4d095593 data-v-85010ec6><!--[--><p class="text" data-v-4d095593>固件修改记录</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-27da67de><section class="vp-sidebar-item sidebar-item level-0 collapsible" data-v-27da67de data-v-4d095593><div class="item" role="button" tabindex="0" data-v-4d095593><div class="indicator" data-v-4d095593></div><!----><h2 class="text" data-v-4d095593>控制器</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-4d095593><span class="vpi-chevron-right caret-icon" data-v-4d095593></span></div></div><div class="items" data-v-4d095593><!--[--><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-4d095593 data-v-4d095593><div class="item" data-v-4d095593><div class="indicator" data-v-4d095593></div><!----><a class="vp-link no-icon link link" href="/px4code/controller/iejazgwj/" data-v-4d095593 data-v-85010ec6><!--[--><p class="text" data-v-4d095593>AttiControl</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-4d095593 data-v-4d095593><div class="item" data-v-4d095593><div class="indicator" data-v-4d095593></div><!----><a class="vp-link no-icon link link" href="/px4code/controller/4dbuxj2w/" data-v-4d095593 data-v-85010ec6><!--[--><p class="text" data-v-4d095593>参数自优化</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-4d095593 data-v-4d095593><div class="item" data-v-4d095593><div class="indicator" data-v-4d095593></div><!----><a class="vp-link no-icon link link" href="/px4code/controller/pwlltgw1/" data-v-4d095593 data-v-85010ec6><!--[--><p class="text" data-v-4d095593>ctrl_freq</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-4d095593 data-v-4d095593><div class="item" data-v-4d095593><div class="indicator" data-v-4d095593></div><!----><a class="vp-link no-icon link link" href="/px4code/controller/xyb3tlxm/" data-v-4d095593 data-v-85010ec6><!--[--><p class="text" data-v-4d095593>z_axis_ctrl</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-27da67de><section class="vp-sidebar-item sidebar-item level-0 collapsible" data-v-27da67de data-v-4d095593><div class="item" role="button" tabindex="0" data-v-4d095593><div class="indicator" data-v-4d095593></div><!----><h2 class="text" data-v-4d095593>滤波器</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-4d095593><span class="vpi-chevron-right caret-icon" data-v-4d095593></span></div></div><div class="items" data-v-4d095593><!--[--><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-4d095593 data-v-4d095593><div class="item" data-v-4d095593><div class="indicator" data-v-4d095593></div><!----><a class="vp-link no-icon link link" href="/px4code/ti2v4oag/" data-v-4d095593 data-v-85010ec6><!--[--><p class="text" data-v-4d095593>EKF高度估计</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-27da67de><section class="vp-sidebar-item sidebar-item level-0 collapsible" data-v-27da67de data-v-4d095593><div class="item" role="button" tabindex="0" data-v-4d095593><div class="indicator" data-v-4d095593></div><!----><h2 class="text" data-v-4d095593>通讯SDK</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-4d095593><span class="vpi-chevron-right caret-icon" data-v-4d095593></span></div></div><div class="items" data-v-4d095593><!--[--><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-4d095593 data-v-4d095593><div class="item" data-v-4d095593><div class="indicator" data-v-4d095593></div><!----><a class="vp-link no-icon link link" href="/kxtk2ysd/" data-v-4d095593 data-v-85010ec6><!--[--><p class="text" data-v-4d095593>mavros</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-4d095593 data-v-4d095593><div class="item" data-v-4d095593><div class="indicator" data-v-4d095593></div><!----><a class="vp-link no-icon link link" href="/z8hnf86d/" data-v-4d095593 data-v-85010ec6><!--[--><p class="text" data-v-4d095593>qgc</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-4d095593 data-v-4d095593><div class="item" data-v-4d095593><div class="indicator" data-v-4d095593></div><!----><a class="vp-link no-icon link link" href="/sizznice/" data-v-4d095593 data-v-85010ec6><!--[--><p class="text" data-v-4d095593>vision_pose</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-27da67de><section class="vp-sidebar-item sidebar-item level-0 collapsible" data-v-27da67de data-v-4d095593><div class="item" role="button" tabindex="0" data-v-4d095593><div class="indicator" data-v-4d095593></div><!----><h2 class="text" data-v-4d095593>飞行模式</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-4d095593><span class="vpi-chevron-right caret-icon" data-v-4d095593></span></div></div><div class="items" data-v-4d095593><!--[--><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-4d095593 data-v-4d095593><div class="item" data-v-4d095593><div class="indicator" data-v-4d095593></div><!----><a class="vp-link no-icon link link" href="/px4code/lx82vmmh/" data-v-4d095593 data-v-85010ec6><!--[--><p class="text" data-v-4d095593>Px4Mode</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-27da67de><section class="vp-sidebar-item sidebar-item level-0 collapsible has-active" data-v-27da67de data-v-4d095593><div class="item" role="button" tabindex="0" data-v-4d095593><div class="indicator" data-v-4d095593></div><!----><h2 class="text" data-v-4d095593>驱动相关</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-4d095593><span class="vpi-chevron-right caret-icon" data-v-4d095593></span></div></div><div class="items" data-v-4d095593><!--[--><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-4d095593 data-v-4d095593><div class="item" data-v-4d095593><div class="indicator" data-v-4d095593></div><!----><a class="vp-link no-icon link link" href="/px4code/driver/6h4y4yda/" data-v-4d095593 data-v-85010ec6><!--[--><p class="text" data-v-4d095593>esc_protocol</p><!--]--><!----></a><!----></div><!----></div><div class="vp-sidebar-item sidebar-item level-1 is-link" data-v-4d095593 data-v-4d095593><div class="item" data-v-4d095593><div class="indicator" data-v-4d095593></div><!----><a class="vp-link no-icon link link" href="/px4code/driver/faofu83s/" data-v-4d095593 data-v-85010ec6><!--[--><p class="text" data-v-4d095593>Quadrotor Mixer</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><!--[--><div id="VPContent" vp-content class="vp-content has-sidebar" data-v-72347141 data-v-99ed6822><div class="has-sidebar has-aside vp-doc-container" data-v-33a27419><!--[--><!--]--><div class="container" data-v-33a27419><div class="aside" vp-outline data-v-33a27419><div class="aside-curtain" data-v-33a27419></div><div class="aside-container" data-v-33a27419><div class="aside-content" data-v-33a27419><div class="vp-doc-aside" data-v-33a27419 data-v-9567f56c><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="vp-doc-aside-outline" role="navigation" data-v-9567f56c data-v-a0d6dffc><div class="content" data-v-a0d6dffc><div class="outline-marker" data-v-a0d6dffc></div><div id="doc-outline-aria-label" aria-level="2" class="outline-title" role="heading" data-v-a0d6dffc><span data-v-a0d6dffc>此页内容</span><span class="vpi-print icon" data-v-a0d6dffc></span></div><ul class="root" data-v-a0d6dffc data-v-47b26d4a><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-9567f56c></div><!--[--><!--]--></div></div></div></div><div class="content" data-v-33a27419><div class="content-container" data-v-33a27419><!--[--><!--]--><main class="main" data-v-33a27419><nav class="vp-breadcrumb" data-v-33a27419 data-v-a6e70877><ol vocab="https://schema.org/" typeof="BreadcrumbList" data-v-a6e70877><!--[--><li property="itemListElement" typeof="ListItem" data-v-a6e70877><a class="vp-link no-icon link breadcrumb" href="/" property="item" typeof="WebPage" data-v-a6e70877 data-v-85010ec6><!--[-->首页<!--]--><!----></a><span class="vpi-chevron-right" data-v-a6e70877></span><meta property="position" content="1" data-v-a6e70877></li><li property="itemListElement" typeof="ListItem" data-v-a6e70877><span class="vp-link no-icon breadcrumb" href="/" property="item" typeof="WebPage" data-v-a6e70877 data-v-85010ec6><!--[-->驱动相关<!--]--><!----></span><span class="vpi-chevron-right" data-v-a6e70877></span><meta property="position" content="2" data-v-a6e70877></li><li property="itemListElement" typeof="ListItem" data-v-a6e70877><a class="vp-link no-icon link breadcrumb current" href="/px4code/driver/6h4y4yda/" property="item" typeof="WebPage" data-v-a6e70877 data-v-85010ec6><!--[-->esc_protocol<!--]--><!----></a><!----><meta property="position" content="3" data-v-a6e70877></li><!--]--></ol></nav><!--[--><h1 class="vp-doc-title page-title" data-v-8825b5f3>esc_protocol <!----></h1><div class="vp-doc-meta" data-v-8825b5f3><p class="reading-time" data-v-8825b5f3><span class="vpi-books icon" data-v-8825b5f3></span><span data-v-8825b5f3>1403字</span><span data-v-8825b5f3>约5分钟</span></p><!----><p class="create-time" data-v-8825b5f3><span class="vpi-clock icon" data-v-8825b5f3></span><span data-v-8825b5f3>2024-09-09</span></p></div><!--]--><div class="vp-doc plume-content _px4code_driver_6h4y4yda_ external-link-icon-enabled" vp-content data-v-33a27419><h2 id="标准pwm" tabindex="-1"><a class="header-anchor" href="#标准pwm"><span>标准pwm</span></a></h2><p>对于无刷电调，pwm一般使用高电平脉宽代表油门百分比，一般来说，脉宽的范围是1<sub>2ms对应油门0</sub>100%。</p><p><img src="https://emnavi-doc-img.oss-cn-beijing.aliyuncs.com/hao_doc/pwm.png" alt=""></p><p>由于满油门需要在一个周期保证2ms高电平，因此最大控制频率为500hz。当然一个周期里不能只有高电平，每个周期后面跟一个在跟一个时间非常短的低电平，pwm频率适当降低（比如490hz）。</p><p>常见的pwm控制频率为 50~490hz。</p><p>对于电机控制来说有，有一些特殊的脉宽含义 900 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>μ</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">\mu s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">μ</span><span class="mord mathnormal">s</span></span></span></span> Disable 电机 最小pwm油门，一些电机需要一个最小油门才开始转 px4默认值1075</p><h2 id="oneshot125" tabindex="-1"><a class="header-anchor" href="#oneshot125"><span>Oneshot125</span></a></h2><p>onesshot 是pwm的另一种实现，能够提高电机控制频率，对于oneshot125协议来说，其相当于把1~2ms的脉宽缩放至125<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>μ</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">\mu s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">μ</span><span class="mord mathnormal">s</span></span></span></span>~250<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>μ</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">\mu s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">μ</span><span class="mord mathnormal">s</span></span></span></span>,缩放公式如下</p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>y</mi><mo>=</mo><mn>125</mn><mo>⋅</mo><mfrac><mi>x</mi><mn>1000</mn></mfrac><mo separator="true">,</mo><mi>x</mi><mo>∈</mo><mo stretchy="false">[</mo><mn>1000</mn><mo separator="true">,</mo><mn>2000</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex"> y=125\cdot\frac{x}{1000},x\in[1000,2000] </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">125</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.7936em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.1076em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1000</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">1000</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">2000</span><span class="mclose">]</span></span></span></span></span></p><p>那么对于900 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>μ</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">\mu s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">μ</span><span class="mord mathnormal">s</span></span></span></span> Disable 信号，缩放后为112.5<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>μ</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">\mu s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">μ</span><span class="mord mathnormal">s</span></span></span></span>。</p><p>在px4 1.13的固件的四旋翼机型中，默认状态使用了oneshot125而不是标准pwm，因为对于1.13固件，PWM_MAIN_RATE 默认为0， <img src="https://emnavi-doc-img.oss-cn-beijing.aliyuncs.com/hao_doc/Pasted image 20240402133548.png" alt=""> 但是虽然使用了oneshot125，但是事实的控制频率并没有提高，依然为400hz，虽然高电平脉宽<strong>是正常的</strong>，但是周期波动却非常大。</p><p><img src="https://emnavi-doc-img.oss-cn-beijing.aliyuncs.com/hao_doc/Pasted image 20240402134506.png" alt=""></p><p>与之相比 nxtpx4的固件周期就稳定多了，控制频率也达到了2khz <img src="https://emnavi-doc-img.oss-cn-beijing.aliyuncs.com/hao_doc/Pasted image 20240402134349.png" alt=""> 作为参考，以下是 betaflight pwm输出(400hz)的周期情况 <img src="https://emnavi-doc-img.oss-cn-beijing.aliyuncs.com/hao_doc/Pasted image 20240402134721.png" alt=""></p><h1 id="dshot" tabindex="-1"><a class="header-anchor" href="#dshot"><span>Dshot</span></a></h1><p>dshot就和pwm完全不同了，这是一种数字协议.</p><h2 id="帧格式" tabindex="-1"><a class="header-anchor" href="#帧格式"><span>帧格式</span></a></h2><p>每帧数据由16bit组成。包含</p><ul><li>11 bit 油门值: 一共2048个值，0被保留作为disarmed。1-47 作为特殊指令。剩下48~2047作为油门值，分辨率是2000（Steps）；</li><li>1 bit <strong>Telemetry request</strong> ： 如果设置了此选项，telemetry数据将通过单独的通道发送回来。</li><li><strong>4 bit CRC</strong> 校验:。 也就是结构如下：</li></ul><div class="language- line-numbers-mode" data-ext="" data-title=""><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>SSSSSSSSSSSTCCCC</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>特殊指令含义如下 1-5：beep（1= low freq. 5 = high freq） 6： esc信息请求（fw版本和通过tlm线发送的SN） 7：一个方向旋转 8：另一个方向旋转 9：3d模式关闭 10：3d模式打开 11：esc设置请求（saved settings over the TLM wire） 12：保存设置</p><h2 id="_0和1的表示" tabindex="-1"><a class="header-anchor" href="#_0和1的表示"><span>0和1的表示</span></a></h2><p>Dshot 通过每个周期(period time)的高电平维持时间来表示0或1。在Dshot中，1的高电平维持时间是0的高电平维持时间的2倍。以Dshot600为例，0的高电平(T0H)时间为625ns，1的高电平时间(T1H)为1250ns。</p><p><img src="https://emnavi-doc-img.oss-cn-beijing.aliyuncs.com/hao_doc/pwm.png" alt=""> 而每个周期（period time，每位数据传输时间）的时间由具体的协议规定，依然以Dshot600为例，其中的600代表的是1ms可传输的bit数，也就是每个bit为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mn>1</mn><mn>600</mn></mfrac><mi>m</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">\frac{1}{600} ms</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1901em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">600</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord mathnormal">m</span><span class="mord mathnormal">s</span></span></span></span> ,也就是1.67us( <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi><mn>0</mn><mi>H</mi><mo>+</mo><mi>T</mi><mn>0</mn><mi>L</mi></mrow><annotation encoding="application/x-tex">T0H+T0L</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mord">0</span><span class="mord mathnormal" style="margin-right:0.08125em;">H</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mord">0</span><span class="mord mathnormal">L</span></span></span></span> 或 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi><mn>1</mn><mi>H</mi><mo>+</mo><mi>T</mi><mn>1</mn><mi>L</mi></mrow><annotation encoding="application/x-tex">T1H+T1L</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mord">1</span><span class="mord mathnormal" style="margin-right:0.08125em;">H</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mord">1</span><span class="mord mathnormal">L</span></span></span></span> )。 知道了每个周期的时间不难算出最大数据带宽和控制频率，即最大传输带宽为600khz。控制频率可达 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mn>600</mn><mn>16</mn></mfrac></mrow><annotation encoding="application/x-tex">\frac{600}{16}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1901em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">16</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">600</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span> 为37.5khz。</p><p>常用Dshot协议的关键参数如下。</p><table><thead><tr><th>DSHOT</th><th>Bitrate</th><th>T1H</th><th>T0H</th><th>Bit period time (µs)</th><th>Frame (µs)</th></tr></thead><tbody><tr><td>150</td><td>150kbit/s</td><td>5.00</td><td>2.50</td><td>6.67</td><td>106.72</td></tr><tr><td>300</td><td>300kbit/s</td><td>2.50</td><td>1.25</td><td>3.33</td><td>53.28</td></tr><tr><td>600</td><td>600kbit/s</td><td>1.25</td><td>0.625</td><td>1.67</td><td>26.72</td></tr><tr><td>1200</td><td>1200kbit/s</td><td>0.625</td><td>0.313</td><td>0.83</td><td>13.28</td></tr></tbody></table><h2 id="esc-telemetry" tabindex="-1"><a class="header-anchor" href="#esc-telemetry"><span>ESC Telemetry</span></a></h2><blockquote><p><strong>这种查询方式几乎已经过时，而且速度太慢，无法做任何有意义的事情</strong></p></blockquote><p>上述帧格式中提到了 Telemetry bit, 它用于向ESC请求信息，比如 ESC 的温度，或电机旋转的 eRPM、电流消耗和电压。</p><blockquote><p>注意：ESC 遥测不是双向 DSHOT，并且通信速度太慢，RPM 过滤无法正常工作。</p></blockquote><p>ESC 遥测需要单独的电线将信息传输回飞行控制器。它通常仅适用于 KISS 和 BLHELI_32 电调。连接飞行控制器的电线可以在多个 ESC 之间共享，并连接到未使用的 UART 的 TX 引脚（用于半双工通信）。</p><p>它实际上并不是 DSHOT 的一部分,详细规范可以在 <a href="http://www.rcgroups.com/forums/showatt.php?attachmentid=8524039&amp;d=1450424877" target="_blank" rel="noopener noreferrer">rcGroups thread</a> 中找到。</p><h2 id="双向dshot" tabindex="-1"><a class="header-anchor" href="#双向dshot"><span>双向Dshot</span></a></h2><blockquote><p>双向 DSHOT 仅适用于 DSHOT 300 及更高版本。</p></blockquote><p>双向 DSHOT 也称为反相 DSHOT，因为信号电平是反相的，因此 1 为低电平，0 为高电平。<strong>这样做是为了让 ESC 知道我们正在双向模式下运行并且它应该发回 eRPM Telemetry数据包</strong>。 启用双向 DHSOT 后，对于发送到 ESC 的每个帧，都会返回带有 eRPM 遥测数据的帧（在同一线路上，而不是另外的遥测线路上），从而将每秒可以发送的帧量减半。</p><p>一旦飞控发送完指令帧，它就会切换到接收模式并等待 ESC 返回 eRPM 帧。发送完指令帧后，有 30μs 的中断时间来切换线路、DMA 和计时器，以便转换成接收模式。</p><h3 id="erpm-帧" tabindex="-1"><a class="header-anchor" href="#erpm-帧"><span>eRPM 帧</span></a></h3><p>ESC在双向DSHOT模式下发送的eRPM遥测帧也是16位值，因此与接收到的帧大小相同，但结构不同：</p><ul><li><strong>12 bit</strong>: eRPM Data 12 位：eRPM 数据</li><li><strong>4 bit</strong>: CRC 4位：CRC</li></ul><p>但是eRPM 数据的编码并不像油门帧的编码那么简单:</p><ul><li><strong>3 bit</strong>：以下值需要左移以获得以 µs 为单位的周期的量</li><li><strong>9 bit</strong>: 周期基数 具体的这里不再详述，请看参考资料2</li></ul><h1 id="参考资料" tabindex="-1"><a class="header-anchor" href="#参考资料"><span>参考资料</span></a></h1><ol><li>https://docs.px4.io/main/en/peripherals/esc_motors.html</li><li>https://brushlesswhoop.com/dshot-and-bidirectional-dshot/</li></ol></div></main><footer class="vp-doc-footer" data-v-33a27419 data-v-56d927e6><!--[--><!--]--><!----><div class="contributors" data-v-56d927e6><span class="contributors-label" data-v-56d927e6>贡献者: </span><span class="contributors-info" data-v-56d927e6><!--[--><!--[--><span class="contributor" data-v-56d927e6>hyaline-wang</span><!----><!--]--><!--]--></span></div><nav class="prev-next" data-v-56d927e6><div class="pager" data-v-56d927e6><a class="vp-link no-icon link pager-link prev" href="/px4code/lx82vmmh/" data-v-56d927e6 data-v-85010ec6><!--[--><span class="desc" data-v-56d927e6>上一页</span><span class="title" data-v-56d927e6>Px4Mode</span><!--]--><!----></a></div><div class="pager" data-v-56d927e6><a class="vp-link no-icon link pager-link next" href="/px4code/driver/faofu83s/" data-v-56d927e6 data-v-85010ec6><!--[--><span class="desc" data-v-56d927e6>下一页</span><span class="title" data-v-56d927e6>Quadrotor Mixer</span><!--]--><!----></a></div></nav></footer><!----><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!--]--><button style="display:none;" type="button" class="vp-back-to-top" aria-label="back to top" data-v-72347141 data-v-7d6cdfc4><span class="percent" data-allow-mismatch data-v-7d6cdfc4>0%</span><span class="show icon vpi-back-to-top" data-v-7d6cdfc4></span><svg aria-hidden="true" data-v-7d6cdfc4><circle cx="50%" cy="50%" data-allow-mismatch style="stroke-dasharray:calc(0% - 12.566370614359172px) calc(314.1592653589793% - 12.566370614359172px);" data-v-7d6cdfc4></circle></svg></button><footer class="vp-footer has-sidebar" vp-footer data-v-72347141 data-v-0c1ab491><div class="container" data-v-0c1ab491><p class="message" data-v-0c1ab491>Powered by <a target="_blank" href="https://v2.vuepress.vuejs.org/">VuePress</a> & <a target="_blank" href="https://theme-plume.vuejs.press">vuepress-theme-plume</a></p><!----></div></footer><!--[--><!--]--><!--]--></div><!--[--><!--]--><!--]--></div><script type="module" src="/assets/app-vo1rYq2c.js" defer></script></body></html>